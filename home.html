<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate Health Vulnerability Analysis</title>
    <style>
        /* Global styles */
        body {
            font-family: Playfair Display, serif;
            margin: 0;
            padding: 0;
            /* background-color: #2a2b7d; */
            background: linear-gradient(to right, #003366, #000080);


            color: #ffffff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            font-size: 36px;
            margin-bottom: 20px;
            text-align: center;
            color: #99c0ea; /* Orange color */
        }

        p {
            font-size: 18px;
            line-height: 1.6;
            text-align: center;
            margin-bottom: 30px;
            color: rgb(255, 255, 255); /* Green color */
        }

        button {
            margin: 5px;
            padding: 10px 20px;
            border: none;
            background-color: #007bff; /* Blue color */
            color: #fff;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        .country-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .country-buttons button {
            margin: 10px;
        }

        .images-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .images-container img {
            width: 300px; /* Set the width of all images */
            height: auto; /* Maintain aspect ratio */
            margin: 10px; /* Add margin around images */
        }

        /* Navbar styles */
        nav {
            background-color: #333;
            color: #fff;
            display: flex;
            justify-content: flex-end; /* Align navbar contents to the right */
            padding: 10px 20px; /* Increase padding to provide space */
        }

        nav a {
            color: #fff;
            text-decoration: none;
            font-size: 18px;
            padding: 10px 20px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        img {
            width: 40%; /* Adjust the width as needed */
            max-width: 400px; /* Set a maximum width */
            float: right; /* Float the image to the right */
            margin-left: 20px; /* Add some margin to separate the image from text */
            margin-bottom: 20px; /* Add margin to the bottom */
        }

        nav a:hover {
            background-color: #555;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 28px;
                margin-bottom: 15px;
            }

            p {
                font-size: 16px;
                margin-bottom: 20px;
            }

            .images-container img {
                width: 100%;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>

<nav>
    <a href="#" class="home-link">Home</a>
    <a href="#" class="analysis-results-link">Analysis Results</a>
    <a href="#" class="forecast-link">Forecast</a>
</nav>

<div class="container">
    <div class="content">
        <div class="home-page">
            <h1>Discover Climate Health Vulnerability Analysis: Insights and Forecasts for Every Nation</h1>
            <div style="text-align: center;">
                <img src="./dataset/image.png" alt="Placeholder image" style="width: 70%; max-width: 400px; margin-bottom: 20px;">
            </div>
            <p>Welcome to our website dedicated to illuminating the intersection of climate and health vulnerability. Explore our comprehensive analysis results for each country, providing valuable insights into current challenges and future projections up to the year 2030.

                Delve into our country-specific reports, offering a detailed examination of climate-related health risks, including temperature extremes, air quality impacts, vector-borne diseases, and more. Gain a deeper understanding of each nation's unique vulnerabilities and opportunities for resilience-building efforts.
                
                Our forecast results offer a glimpse into the future, projecting how climate change will continue to shape health outcomes over the coming decade. With data-driven predictions, policymakers, healthcare professionals, and community leaders can proactively plan and implement strategies to mitigate risks and protect public health.
                
                Join us in our mission to equip decision-makers with the knowledge and tools needed to address climate health challenges head-on. Together, let's pave the way towards a healthier, more resilient world for generations to come.</p>
        </div>

        <div class="analysis-results-page" style="display: none;">
            <h2>Analysis Results</h2>
            <div class="country-buttons">
                <!-- Buttons for 54 countries will be generated here dynamically -->
            </div>
            <div class="images-container">
                <!-- Images for the selected country will be displayed here -->
            </div>
        </div>

        <div class="forecast-page" style="display: none;">
            <h2 class="country-heading">Forecast</h2>
            <div class="country-buttons">
                <!-- Buttons for 54 countries will be generated here dynamically -->
            </div>
            <div class="images-container">
                <!-- Images for the selected country will be displayed here -->
            </div>
        </div>
    </div>
</div>

<script>
    // Array of 54 countries
    const countries = [
        "Albania", "Armenia", "Australia", "Austria", "Azerbaijan", "Belgium", "Bosnia and Herzegovina",
        "Bulgaria", "Canada", "Chile", "Colombia", "Costa Rica", "Croatia", "Cyprus", "Czechia",
        "Denmark", "Estonia", "Finland", "France", "Georgia", "Germany", "Greece", "Hungary", "Iceland",
        "Ireland", "Israel", "Italy", "Japan", "Kazakhstan", "Kyrgyzstan", "Latvia", "Lithuania", "Luxembourg",
        "Malta", "Mexico", "Monaco", "Montenegro", "Netherlands", "New Zealand", "North Macedonia", "Norway",
        "Poland", "Portugal", "Romania", "Russia", "Serbia", "Slovenia", "Spain", "Sweden", "Switzerland",
        "Tajikistan", "Ukraine", "United Kingdom", "United States"
    ];

    // Function to generate buttons for countries
    function generateCountryButtons(page) {
        const container = document.querySelector(`.${page} .country-buttons`);
        container.innerHTML = "";
        countries.forEach(country => {
            const button = document.createElement('button');
            button.textContent = country;
            button.addEventListener('click', () => {
                // Load images for the selected country
                if (page === 'analysis-results-page') {
                    loadAnalysisImagesForCountry(country);
                } else {
                    loadImagesForCountry(country);
                    // Display country name as heading
                    document.querySelector('.country-heading').textContent = country;
                }
            });
            container.appendChild(button);
        });
    }

    // Function to load images for a country for analysis results
    function loadAnalysisImagesForCountry(country) {
        const imagesContainer = document.querySelector('.analysis-results-page .images-container');
        imagesContainer.innerHTML = ""; // Clear previous images

        // Define the base URL for the images
        const analysisResultsFolderPath = `./results/`;

        // Define image paths for different analysis results
        const imagePaths = [
            `distance_matrix/${country}_heatmap.png`,
            `pca_results_with_graph/${country}_cumulative_variance.png`,
            `pca_results_with_graph/${country}_explained_variance.png`,
            `spearman_results/heatmap_${country}_spearman.png`,
            `pearson_results/heatmap_${country}.csv.png`
        ];

        // Create image elements and append them to the container
        imagePaths.forEach(imagePath => {
            // Check if the image exists
            imageExists(`${analysisResultsFolderPath}${imagePath}`)
                .then(exists => {
                    if (exists) {
                        // Create an image element
                        const img = document.createElement('img');
                        // Set the source of the image
                        img.src = `${analysisResultsFolderPath}${imagePath}`;
                        // Set alt text for accessibility
                        img.alt = imagePath.split('/').pop();
                        // Append the image to the container
                        imagesContainer.appendChild(img);
                    }
                });
        });
        const existingImageName = [
            "Cardiovascular diseases",
            "Chronic respiratory diseases",
            "Lower respiratory infections",
            "Chronic kidney disease",
            "Diabetes mellitus",
            "Neonatal disorders"
        ];
        const pieChartFolderPath = `./results/pie_charts/`;
        existingImageName.forEach(imageName => {
            const imgPath = `${pieChartFolderPath}${country}_${imageName}_pie_chart.png`;
            imageExists(imgPath)
                .then(exists => {
                    if (exists) {
                        const img = document.createElement('img');
                        img.src = imgPath;
                        img.alt = `${country}_${imageName}_pie_chart`;
                        imagesContainer.appendChild(img);
                    }
                });
        });
    }

    // Function to load images for a country for forecasting
    function loadImagesForCountry(country) {
        const imagesContainer = document.querySelector('.forecast-page .images-container');
        imagesContainer.innerHTML = ""; // Clear previous images

        // Define the base URL for the images
        const forecastFolderPath = `./results/forecasting_results/${country}/`;

        // Define an array of image filenames for existing types
        const existingImageNames = [
        "Cardiovascular diseases_forecast.png",
        "Chronic respiratory diseases_forecast.png",
        "CO_forecast.png",
        "Lower respiratory infections_forecast.png",
        "NMVOC_forecast.png",
        "Chronic kidney disease_forecast.png",
        "PM2-5_forecast.png",
        "Diabetes mellitus_forecast.png",
        "SOX_forecast.png",
        "NOX_forecast.png",
        "Neonatal disorders_forecast.png",
        "PM10_forecast.png"
    ];

        // Create image elements for existing types and append them to the container
        existingImageNames.forEach(imageName => {
            const imgPath = `${forecastFolderPath}${country}_${imageName}`;
            imageExists(imgPath)
                .then(exists => {
                    if (exists) {
                        const img = document.createElement('img');
                        img.src = imgPath;
                        img.alt = `${country}_${imageName}`;
                        imagesContainer.appendChild(img);
                    }
                });
        });

        // Load pie chart images
       
    }

    // Function to check if an image exists
    function imageExists(url) {
        return new Promise(resolve => {
            const img = new Image();
            img.onload = () => resolve(true);
            img.onerror = () => resolve(false);
            img.src = url;
        });
    }

    // Generate buttons for Analysis Results page
    generateCountryButtons('analysis-results-page');

    // Generate buttons for Forecast page
    generateCountryButtons('forecast-page');

    // Show respective pages when navbar links are clicked
    document.querySelectorAll('.analysis-results-link, .forecast-link').forEach(link => {
        link.addEventListener('click', (event) => {
            event.preventDefault();
            const targetPage = link.classList.contains('analysis-results-link') ? 'analysis-results-page' : 'forecast-page';
            document.querySelectorAll('.container > .content > div').forEach(page => {
                page.style.display = 'none';
            });
            document.querySelector(`.${targetPage}`).style.display = 'block';
        });
    });

    // Show home page when home link is clicked
    document.querySelector('.home-link').addEventListener('click', (event) => {
        event.preventDefault();
        document.querySelectorAll('.container > .content > div').forEach(page => {
            page.style.display = 'none';
        });
        document.querySelector('.home-page').style.display = 'block';
    });
</script>

</body>
</html>
